<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>the outlier | playground</title>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=Syne:wght@400;700;800&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root { --bg: #0d0d0f; --surface: #16161a; --border: #2a2a30; --text: #e8e8f0; --accent: #e8ff47; --wrong: #ff4444; --muted: #666678; }
  body { background: var(--bg); color: var(--text); font-family: 'IBM Plex Mono', monospace; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
  button, select { border-radius: 0px !important; cursor: pointer; font-family: 'Syne'; font-weight: 700; border: none; outline: none; transition: 0.2s; }
  header { padding: 15px 25px; border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; align-items: center; }
  header h1 { font-family: 'Syne'; font-size: 1.1rem; color: var(--accent); }
  .game-container { flex: 1; display: flex; flex-direction: column; align-items: center; padding: 20px; overflow-y: auto; }
  #game-status { font-family: 'Syne'; font-size: 1.8rem; margin-bottom: 5px; text-transform: uppercase; font-weight: 800; }
  #round-info { font-size: 0.7rem; color: var(--muted); margin-bottom: 25px; }
  .players-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; width: 100%; max-width: 1100px; }
  .player-card { background: var(--surface); border: 1px solid var(--border); padding: 20px; text-align: left; }
  .player-card.is-outlier { border-color: var(--accent); box-shadow: 0 0 20px rgba(232, 255, 71, 0.1); }
  .p-name { display: block; font-family: 'Syne'; font-size: 0.75rem; font-weight: 800; margin-bottom: 10px; text-transform: uppercase; }
  .p-desc { font-size: 0.75rem; color: #bbb; line-height: 1.5; min-height: 50px; border-left: 2px solid #2a2a30; padding-left: 10px; margin-bottom: 10px; }
  .p-vote { font-size: 0.6rem; color: var(--wrong); font-weight: 700; }
  .controls { margin-top: auto; padding: 30px; display: flex; gap: 10px; width: 100%; justify-content: center; }
  .btn-main { background: var(--accent); color: #000; padding: 12px 25px; font-size: 0.75rem; }
  .btn-main:disabled { opacity: 0.2; }
</style>
</head>
<body>
<header><h1>the outlier</h1><a href="index.html" style="color:var(--muted); text-decoration:none; font-size:0.6rem; border:1px solid var(--border); padding:4px 8px;">‚Üê HUB</a></header>
<div class="game-container">
  <div id="game-status">STANDBY</div>
  <div id="round-info">READY TO SCAN...</div>
  <div class="players-grid" id="grid"></div>
  <div class="controls">
    <select id="round-select" style="background:var(--surface); color:var(--text); border:1px solid var(--border); padding:0 10px;">
      <option value="3">3 ROUNDS</option>
      <option value="5" selected>5 ROUNDS</option>
    </select>
    <button id="start-btn" class="btn-main" onclick="initGame()">START GAME</button>
    <button id="next-btn" class="btn-main" onclick="playRound()" disabled>NEXT TURN</button>
  </div>
</div>
<script>
const KEY = "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";
const BOT_DATA = [
  { name: "GROK", color: "#ff3c3c", trait: "Edgy, cynical." },
  { name: "CLAUDE", color: "#a78bfa", trait: "Formal, polite." },
  { name: "CHATGPT", color: "#f5c842", trait: "Corporate, friendly." },
  { name: "GEMINI", color: "#4affda", trait: "Creative, uses emojis." },
  { name: "DEEPSEEK", color: "#5cffa8", trait: "Blunt, logical." }
];
let state = { round: 0, maxRounds: 5, outlierIdx: -1, players: [], history: [], pair: {} };

async function initGame() {
  state.pair = {real: "Smartphone", fake: "Remote Control", hint: "Electronic handheld device"};
  state.outlierIdx = Math.floor(Math.random() * 5);
  state.maxRounds = parseInt(document.getElementById('round-select').value);
  state.round = 0;
  state.history = [];
  state.players = BOT_DATA.map((b, i) => ({ ...b, word: i === state.outlierIdx ? state.pair.fake : state.pair.real, desc: "...", votedFor: null }));
  
  renderGrid();
  document.getElementById('start-btn').disabled = true;
  document.getElementById('next-btn').disabled = false;
  playRound();
}

function renderGrid() {
  document.getElementById("grid").innerHTML = state.players.map((p, i) => `
    <div class="player-card" id="card-${i}">
      <span class="p-name" style="color:${p.color}">${p.name}</span>
      <div class="p-desc">"${p.desc}"</div>
      <div class="p-vote">${p.votedFor ? 'SUSPECTS: ' + p.votedFor : ''}</div>
      <div id="status-${i}" style="font-size:0.55rem; color:var(--muted); margin-top:10px;">IDLE</div>
    </div>`).join('');
}

async function playRound() {
  if (state.round >= state.maxRounds) return endGame();
  state.round++;
  document.getElementById('round-info').innerText = `ROUND ${state.round} / ${state.maxRounds}`;
  document.getElementById('next-btn').disabled = true;

  for (let i = 0; i < state.players.length; i++) {
    document.getElementById(`status-${i}`).innerText = "THINKING...";
    await new Promise(r => setTimeout(r, 1000));
    const p = state.players[i];
    const prompt = `Game: The Outlier. Word: ${p.word}. Hint: ${state.pair.hint}. Personality: ${p.trait}. Describe word in 1 vague sentence. Don't say the word!`;
    const res = await fetch("https://api.groq.com/openai/v1/chat/completions", {
      method: "POST",
      headers: { "Content-Type": "application/json", "Authorization": `Bearer ${KEY}` },
      body: JSON.stringify({ model: "llama-3.3-70b-versatile", messages: [{role: "system", content: prompt}] })
    });
    const d = await res.json();
    p.desc = d.choices[0].message.content;
    state.history.push(`${p.name}: ${p.desc}`);
    renderGrid();
    document.getElementById(`status-${i}`).innerText = "DONE";
  }
  document.getElementById('next-btn').disabled = false;
}

function endGame() {
  document.getElementById('game-status').innerText = "REVEALED";
  document.getElementById(`card-${state.outlierIdx}`).classList.add('is-outlier');
}
</script>
</body>
</html>
